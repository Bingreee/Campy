<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="campy.com.dao.RoomDao1">
 
<insert id="insertReserve" parameterType="campy.com.dto.ReserveDto">
	insert into reserve values(#{id},#{mem_name},#{c_no},#{r_no},sysdate,#{mem_tel},#{c_price},#{start_date},#{end_date},seq_reserve.nextval)
</insert>

<select id="selRoomPho" resultType="campy.com.dto.R_PhotoDto" parameterType="map">
	select * from r_photo where c_no=#{c_no} and r_no=#{r_no}
</select>

<select id="allReserve" resultType="campy.com.dto.ReserveDto">
	select * from reserve order by reserve_no desc
</select>

<select id="selCamNO" resultType="int" parameterType="int">
	select c_no from camping where c_no=#{c_no}
</select>

<select id="chkDate" resultType="int" parameterType="campy.com.dto.ReserveDto">
	select count(*) from reserve where c_no=#{c_no} and r_no=#{r_no} and
	(#{start_date} between start_date and end_date or #{end_date} between start_date and end_date)
</select>

<select id="chkDateList" resultType="campy.com.dto.ReserveDto" parameterType="campy.com.dto.ReserveDto">
	select * from reserve where not c_no=#{c_no} and not r_no=#{r_no} and
	(#{start_date} not between start_date and end_date or #{end_date} not between start_date and end_date)
</select>

<select id="selCalender" resultType="campy.com.dto.ReserveDto">
	 select mem_name, c_no, r_no, start_date, end_date from reserve 
</select>

</mapper>